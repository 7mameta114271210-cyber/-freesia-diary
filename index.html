<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ãƒ•ãƒªãƒ¼ã‚¸ã‚¢ã®ãƒ¡ãƒ¢å¸³</title>
<style>
    /* å…¨ä½“ã®è¨­å®š */
    body { margin: 0; padding: 0; font-family: sans-serif; background: #fce4ec; overflow: hidden; }
    
    /* ç”»é¢å…¨ä½“ */
    #app { width: 100vw; height: 100vh; display: flex; flex-direction: column; position: relative; }

    /* ãƒ•ãƒªãƒ¼ã‚¸ã‚¢ã¡ã‚ƒã‚“ã®ç«‹ã¡çµµï¼ˆå³ä¸‹ã«é…ç½®ï¼‰ */
    #freesia-img {
        position: absolute;
        bottom: 60px; /* å…¥åŠ›æ¬„ã¨ã‹ã¶ã‚‰ãªã„ã‚ˆã†ã«å°‘ã—ä¸Š */
        right: -20px;
        height: 70vh; /* ç”»é¢ã®7å‰²ãã‚‰ã„ã®é«˜ã• */
        z-index: 0;
        pointer-events: none; /* ã‚¿ãƒƒãƒ—ã¯å¾Œã‚ã«æŠœã‘ã‚‹ã‚ˆã†ã« */
        opacity: 0.9;
    }

    /* ãƒãƒ£ãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚¨ãƒªã‚¢ */
    #chat-area {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        padding-bottom: 80px; /* ä¸‹ã®å…¥åŠ›æ¬„ã®åˆ†ã‚ã‘ã‚‹ */
        z-index: 1;
    }

    /* å¹ãå‡ºã—ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .bubble {
        max-width: 70%;
        padding: 10px 15px;
        margin: 10px 0;
        border-radius: 15px;
        font-size: 16px;
        line-height: 1.4;
        position: relative;
        word-wrap: break-word;
    }
    /* è‡ªåˆ†ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆå³å´ï¼‰ */
    .bubble.me {
        background: #81d4fa; /* æ°´è‰² */
        color: #333;
        align-self: flex-end;
        margin-left: auto;
        border-bottom-right-radius: 0;
    }
    /* ãƒ•ãƒªãƒ¼ã‚¸ã‚¢ã¡ã‚ƒã‚“ã®è¿”äº‹ï¼ˆå·¦å´ï¼‰ */
    .bubble.freesia {
        background: #fff;
        color: #555;
        align-self: flex-start;
        border: 2px solid #f8bbd0;
        border-bottom-left-radius: 0;
    }

    /* å…¥åŠ›ã‚¨ãƒªã‚¢ï¼ˆç”»é¢ä¸‹å›ºå®šï¼‰ */
    #input-area {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: #fff;
        padding: 10px;
        box-sizing: border-box;
        display: flex;
        border-top: 1px solid #ccc;
        z-index: 10;
    }
    #memo-input {
        flex: 1;
        padding: 10px;
        border-radius: 20px;
        border: 1px solid #ddd;
        font-size: 16px;
    }
    #send-btn {
        margin-left: 10px;
        padding: 0 20px;
        border-radius: 20px;
        background: #f06292;
        color: white;
        border: none;
        font-weight: bold;
    }

    /* ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ï¼ˆå·¦ä¸Šï¼‰ */
    #view-memo-btn {
        position: fixed;
        top: 15px;
        left: 15px;
        background: rgba(255,255,255,0.9);
        padding: 8px 15px;
        border-radius: 20px;
        border: 2px solid #f06292;
        color: #f06292;
        font-weight: bold;
        z-index: 20;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* ãƒ¡ãƒ¢ä¸€è¦§ã®ç”»é¢ï¼ˆæœ€åˆã¯éš ã‚Œã¦ã‚‹ï¼‰ */
    #memo-list-overlay {
        display: none; /* æœ€åˆã¯éè¡¨ç¤º */
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(255,255,255,0.95);
        z-index: 30;
        padding: 60px 20px 20px 20px;
        box-sizing: border-box;
        overflow-y: auto;
    }
    .memo-item {
        background: #fff;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        border-left: 5px solid #f06292;
        display: flex;
        justify-content: space-between;
    }
    .close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 24px;
        background: none;
        border: none;
    }
</style>
</head>
<body>

<div id="app">
    <img id="freesia-img" src="export202602121548229880.png" alt="Freesia">

    <button id="view-memo-btn" onclick="toggleMemoList()">ğŸ“– ãƒ¡ãƒ¢å¸³ã‚’è¦‹ã‚‹</button>

    <div id="chat-area" id="chat-container">
        <div class="bubble freesia">
            ä»Šæ—¥ã¯ä½•ãŒã‚ã£ãŸã®ï¼Ÿ<br>ç§ãŒè¦šãˆã¦ãŠãã­ã€‚
        </div>
    </div>

    <div id="input-area">
        <input type="text" id="memo-input" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...">
        <button id="send-btn" onclick="sendMessage()">é€ä¿¡</button>
    </div>
</div>

<div id="memo-list-overlay">
    <button class="close-btn" onclick="toggleMemoList()">âœ• é–‰ã˜ã‚‹</button>
    <h3>ğŸ“ å¤§åˆ‡ãªãƒ¡ãƒ¢</h3>
    <div id="saved-memos"></div>
</div>

<script>
    // ãƒ¡ãƒ¢ã‚’ä¿å­˜ã™ã‚‹å ´æ‰€ï¼ˆã‚¹ãƒãƒ›ã®ä¸­ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆï¼ï¼‰
    function sendMessage() {
        const input = document.getElementById('memo-input');
        const text = input.value;
        if(text.trim() === "") return;

        // 1. è‡ªåˆ†ã®å¹ãå‡ºã—ã‚’å‡ºã™
        addBubble(text, 'me');

        // 2. ã‚¹ãƒãƒ›ã«ä¿å­˜ã™ã‚‹
        saveToStorage(text);

        // 3. ãƒ•ãƒªãƒ¼ã‚¸ã‚¢ã¡ã‚ƒã‚“ã®è¿”äº‹ï¼ˆ0.5ç§’å¾Œã«ï¼‰
        setTimeout(() => {
            const replies = ["ã†ã‚“ã€ã‚ã‹ã£ãŸï¼", "ãƒ¡ãƒ¢ã—ãŸã‚ˆã€‚", "ãã‚Œã¯å¤§åˆ‡ã ã­ã€‚", "ãŠç–²ã‚Œæ§˜ï¼"];
            const randomReply = replies[Math.floor(Math.random() * replies.length)];
            addBubble(randomReply, 'freesia');
            updateMemoList(); // ãƒªã‚¹ãƒˆã‚‚æ›´æ–°
        }, 500);

        input.value = ""; // å…¥åŠ›æ¬„ã‚’ç©ºã«ã™ã‚‹
        // ä¸‹ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        const chatArea = document.getElementById('chat-area');
        chatArea.scrollTop = chatArea.scrollHeight;
    }

    // å¹ãå‡ºã—ã‚’ä½œã‚‹é­”æ³•
    function addBubble(text, type) {
        const chatArea = document.getElementById('chat-area');
        const bubble = document.createElement('div');
        bubble.className = `bubble ${type}`;
        bubble.innerText = text;
        chatArea.appendChild(bubble);
        chatArea.scrollTop = chatArea.scrollHeight;
    }

    // ã‚¹ãƒãƒ›ã«ä¿å­˜ã™ã‚‹é­”æ³•
    function saveToStorage(text) {
        let memos = JSON.parse(localStorage.getItem('freesiaMemos')) || [];
        const now = new Date();
        const timeString = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
        memos.push({ text: text, time: timeString });
        localStorage.setItem('freesiaMemos', JSON.stringify(memos));
    }

    // ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆã‚’è¡¨ç¤º/éè¡¨ç¤ºã™ã‚‹é­”æ³•
    function toggleMemoList() {
        const overlay = document.getElementById('memo-list-overlay');
        if (overlay.style.display === 'block') {
            overlay.style.display = 'none';
        } else {
            updateMemoList();
            overlay.style.display = 'block';
        }
    }

    // ä¿å­˜ã•ã‚ŒãŸãƒ¡ãƒ¢ã‚’ãƒªã‚¹ãƒˆã«ã™ã‚‹é­”æ³•
    function updateMemoList() {
        const listContainer = document.getElementById('saved-memos');
        const memos = JSON.parse(localStorage.getItem('freesiaMemos')) || [];
        listContainer.innerHTML = ""; // ä¸€å›ã‚¯ãƒªã‚¢
        
        memos.reverse().forEach((memo, index) => { // æ–°ã—ã„é †ã«è¡¨ç¤º
            const div = document.createElement('div');
            div.className = 'memo-item';
            div.innerHTML = `
                <span>${memo.text}</span>
                <span style="font-size:12px; color:#888;">${memo.time}</span>
            `;
            listContainer.appendChild(div);
        });
    }
</script>

</body>
</html>
